<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Control de versiones usando Git</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://paginas.matem.unam.mx/bioinformatica/index.php" title="Escuela de Verano de Bioinformatica">
          <img alt="Logo Escuela de Verano de Bioinformatica 2016" src="img/logo-bioinformatica2.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">Control de versiones usando Git</h1></a>
          <h2 class="subtitle">Seguimiento de los cambios</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="objetivos-de-aprendizaje"><span class="glyphicon glyphicon-certificate"></span>Objetivos de aprendizaje</h2>
</div>
<div class="panel-body">
<ul>
<li>Realizar el ciclo modificar-añadir-confirmar (modify-add-commit) para un solo archivo.</li>
<li>Explicar donde se almacena la información en cada etapa del ciclo de Git.</li>
</ul>
</div>
</section>
<p>Creemos un archivo llamado <code>mars.txt</code>, que contenga algunas notas acerca de las posibilidades de utilizar el planeta rojo como base espacial.<br />
(Para el ejercicio utilizaremos el editor <code>nano</code> para editar el archivo; puedes utilizar tu editor de texto preferido si así lo deseas. Mantén en mente que este no tiene que ser el <code>core.editor</code> que asignamos como editor global previamente.)</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">nano</span> mars.txt</code></pre></div>
<p>Escribe el siguiente texto dentro del archivo <code>mars.txt</code>:</p>
<pre class="output"><code>Cold and dry, but everything is my favorite color</code></pre>
<p><code>mars.txt</code> ahora contiene una sola línea, la cual podemos ver ejecutando:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">ls</span></code></pre></div>
<pre class="output"><code>mars.txt</code></pre>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color</code></pre>
<p>Si revisamos de nuevo el estado del proyecto, Git nos dice que ha encontrado el nuevo archivo:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
#
# Initial commit
#
# Untracked files:
#   (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
#
#   mars.txt
nothing added to commit but untracked files present (use &quot;git add&quot; to track)</code></pre>
<p>El mensaje, notificándonos de archivos no rastreados por “untracked files”, nos indica que hay un archivo que Git no está rastreando. Le podemos decir a Git que rastree este archivo utilizando <code>git add</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> add mars.txt</code></pre></div>
<p>y revisar que el cambio se efectuó correctamente:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)
#
#   new file:   mars.txt
#</code></pre>
<p>Git ahora sabe que debe rastrear cambios en el archivo <code>mars.txt</code>, pero no ha registrado estos cambios como confirmados en un “commit”. Para lograr que lo haga, tenemos que ejecutar un comando más:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> commit -m <span class="st">&quot;Start notes on Mars as a base&quot;</span></code></pre></div>
<pre class="output"><code>[master (root-commit) f22b25e] Start notes on Mars as a base
 1 file changed, 1 insertion(+)
 create mode 100644 mars.txt</code></pre>
<p>Cuando ejecutamos <code>git commit</code>, Git toma los archivos que hemos agregado a través del comando <code>git add</code> y almacena una copia permanentemente dentro del directorio especial <code>.git</code>. Esta copia permanente se llama un <a href="reference.html#commit">commit</a> (o <a href="reference.html#revision">revision</a>) y su código corto de identificación es <code>f22b25e</code>. (Cada commit tendrá un identificador distinto).</p>
<p>Utilizamos la bandera <code>-m</code> (de “mensaje”) para guardar un mensaje específico, corto y descriptivo que nos permita recordar qué cambios hicimos y el porqué. Si sólo ejecutamos el comando <code>git commit</code> sin la opción <code>-m</code>,<br />
Git iniciará <code>nano</code> (o cualquier otro editor que hayamos asignado como <code>core.editor</code>) para permitirnos escribir el mensaje. Si no se escribe un un mensaje, no se realizará el commit.</p>
<p>Los <a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">buenos mensajes en un commit</a> comienzan con un pequeño resumen (menos de 50 caracteres) de los cambios hechos como parte del commit. Si deseas agregar detalles más descriptivos puedes añadir una línea vacía entre la línea de resumen y otros notas adicionales.</p>
<p>Si después de esto ejecutamos <code>git status</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
nothing to commit, working directory clean</code></pre>
<p>Git nos informa que todo está actualizado. Si queremos saber que cambios se han hecho recientemente, podemos pedirle a Git que nos muestre el historial reciente del proyecto utilizando el comando <code>git log</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> log</code></pre></div>
<pre class="output"><code>commit f22b25e3233b4645dabd0d81e651fe074bd8e73b
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 09:51:46 2013 -0400

    Start notes on Mars as a base</code></pre>
<p><code>git log</code> lista todos los commits realizados en ese repositorio en ordern cronológico inverso. El listado de cada commit incluye el identificador (el cual comienza con los mismo caracteres que el identificador corto impreso por el comando <code>git commit</code> que ejecutamos previamente), el autor del commit, cuándo fue creado, y el mensaje de registro (log) que le otorgamos a Git cuando creamos el commit.</p>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="dónde-están-mis-cambios"><span class="glyphicon glyphicon-pushpin"></span>¿Dónde están mis cambios?</h2>
</div>
<div class="panel-body">
<p>Si ejecutamos <code>ls</code> en este momento, aún veremos un solo archivo llamado <code>mars.txt</code>. Esto se debe a que Git guarda información acerca del historial de cada archivo en el directorio especial llamado <code>.git</code> de modo que nuestro espacio de trabajo o filesystem no se llene con otros archivos (así como para prevenir que accidentalmente editemos o borremos una versión previa).</p>
</div>
</aside>
<p>Ahora supongamos que Mandy quiere añadir más información al archivo. (Lo editaremos de nuevo usando <code>nano</code> seguido por el comando <code>cat</code> para mostrar el contenido del archivo. Puedes utilizar otro editor y alternativas a <code>cat</code> si lo prefieres).</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">nano</span> mars.txt
$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Mandy</code></pre>
<p>Ahora, si ejecutamos <code>git status</code> nos informa que un archivo que ya conoce ha sido modificado:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
# Changes not staged for commit:
#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)
#
#   modified:   mars.txt
#
no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</code></pre>
<p>La última línea proporciona la frase clave: “no changes added to commit”. Hemos modificado este archivo, pero no le hemos dicho a Git que queremos agregar estos cambios (lo cual hacemos con el comando <code>git add</code>) como tampoco los hemos guardado permanentemente (lo que hacemos usando <code>git commit</code>). Hagámoslo ahora. Es un buen hábito siempre revisar nuestros cambios antes de guardarlos. Hacemos esto utilizando <code>git diff</code>. Este comando nos muestra las diferencias entre el estado actual del archivo y la última versión guardada:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> diff</code></pre></div>
<pre class="output"><code>diff --git a/mars.txt b/mars.txt
index df0654a..315bf3a 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,2 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Mandy</code></pre>
<p>El texto de salida es críptico ya que es una serie de comandos para herramientas tales como editores y <code>patch</code> indicándoles como reconstruir un archivo dado los cambios en el otro. Si lo dividimos en partes:</p>
<ol style="list-style-type: decimal">
<li>La primera línea nos indica que Git está imprimiendo un resultado similar al del commando <code>diff</code> al comparar la versión antigua y nueva del archivo.</li>
<li>La segunda línea nos dice exactamente qué versiones del archivo está comparando Git; <code>df0654a</code> y <code>315bf3a</code> son etiquetas únicas generadas por la computadora para cada una de esas versiones.</li>
<li>La tercera y cuarta línea muestran el nombre del archivo que cambiamos.</li>
<li>Las líneas restantes son las más interesantes, ya que nos muestras las diferencias en sí así como las líneas en las que ocurrieron estos cambios. En particular, los símbolos de <code>+</code> en la primera columna muestras donde se han añadido líneas.</li>
</ol>
<p>Después de revisar estos cambios ha llegado el momento de aprobarlos a través de un commit:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> commit -m <span class="st">&quot;Add concerns about effects of Mars&#39; moons on Mandy&quot;</span>
$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
# Changes not staged for commit:
#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)
#
#   modified:   mars.txt
#
no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</code></pre>
<p>Whoops: Git no acepta el commit ya que no utilizamos <code>git add</code> primero. Arreglémoslo:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> add mars.txt
$ <span class="kw">git</span> commit -m <span class="st">&quot;Add concerns about effects of Mars&#39; moons on Mandy&quot;</span></code></pre></div>
<pre class="output"><code>[master 34961b1] Add concerns about effects of Mars&#39; moons on Mandy
 1 file changed, 1 insertion(+)</code></pre>
<p>Git insiste en que agreguemos archivos que hemos cambiado antes de aprobarlos usando commit ya que puede ser que no queramos aprobar todos los cambios al mismo tiempo. Por ejemplo, supongamos que agregamos algunas referencias a nuestro trabajo de tesis. Tal vez queramos aprobar esos cambios y añadir estas a la bibliografía, pero <em>sin</em> aprobar (commit) los cambios que realizamos a la conclusión (los cuales aún no hemos terminado).</p>
<p>Para permitir esto, Git tiene un área especial conocida como <em>staging area</em> en la cual rastrea cambios que han sido añadidos al grupo de cambios o <a href="reference.html#change-set">change set</a> actual, pero que aún no han sido aprobados por medio de un commit.</p>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="staging-area"><span class="glyphicon glyphicon-pushpin"></span>Staging area</h2>
</div>
<div class="panel-body">
<p>Si pensamos en Git como una cámera que toma fotos de los cambios a lo largo de la vida de un proyecto, entonces <code>git add</code> indica <em>qué</em> se va a incluir en la fotografía y <code>git commit</code> esta encargado de <em>tomar</em> la fotografía, así como de crear un registro permanente de la misma (como un commit). Si no hay nada en fase “staged” cuando ejecutamos <code>git commit</code>, Git te pedirá que utilices <code>git commit -a</code> o <code>git commit --all</code>, lo cual sería equivalente a !invitar a <em>todos</em> los cambios a salir en la foto! Sin embargo, casi siempre es mejor añadir cada cambio de manera explícita al área de staging, ya que puede ser que apruebes cambios que hiciste pero olvidaste. (Siguiendo con la analogía de las fotografías puede que incluyas a un extra con maquillaje incompleto caminando en medio de la foto por haber utilizado <code>-a</code>!). Trata de añadir cosas manualmente o frecuentemente te encontrarás buscando el comando “git undo commit”.</p>
</div>
</aside>
<div class="figure">
<img src="fig/git-staging-area.svg" alt="El Staging Area de Git" />
<p class="caption">El “Staging Area” de Git</p>
</div>
<p>Observemos como los cambios a un archivo se mueven de nuestro editor de texto a el área de staging y dentro del registro de cambios a largo plazo. Primero agreguemos otra línea al archivo:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">nano</span> mars.txt
$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Mandy
But Billy will appreciate the lack of humidity</code></pre>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> diff</code></pre></div>
<pre class="output"><code>diff --git a/mars.txt b/mars.txt
index 315bf3a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1,2 +1,3 @@
 Cold and dry, but everything is my favorite color
 The two moons may be a problem for Mandy
+But Billy will appreciate the lack of humidity</code></pre>
<p>Hasta ahora todo va bien: añadimos una línea al final del archivo (mostrada con un <code>+</code> en la primera columna). Ahora, pongamos este cambio en el área de staging y veamos que reporta <code>git diff</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> add mars.txt
$ <span class="kw">git</span> diff</code></pre></div>
<p>No hay resultado: en lo que a Git concierne no hay diferencia entre lo que se le esta pidiendo que guarde de forma permanente y lo que esta actualmente en el directorio. Sin embargo, si hacemos lo siguiente:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> diff --staged</code></pre></div>
<pre class="output"><code>diff --git a/mars.txt b/mars.txt
index 315bf3a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1,2 +1,3 @@
 Cold and dry, but everything is my favorite color
 The two moons may be a problem for Mandy
+But Billy will appreciate the lack of humidity</code></pre>
<p>nos muestra un cambio entre el último cambio aprobado (commited) y el archivo que se encuentra en el área de staging. Guardemos nuestros cambios:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> commit -m <span class="st">&quot;Discuss concerns about Mars&#39; climate for Billy&quot;</span></code></pre></div>
<pre class="output"><code>[master 005937f] Discuss concerns about Mars&#39; climate for Billy
 1 file changed, 1 insertion(+)</code></pre>
<p>y revisemos una vez más el status:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
nothing to commit, working directory clean</code></pre>
<p>y revisemos el historial para ver que hemos hecho hasta el momento:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> log</code></pre></div>
<pre class="output"><code>commit 005937fbe2a98fb83f0ade869025dc2636b4dad5
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 10:14:07 2013 -0400

    Discuss concerns about Mars&#39; climate for Billy

commit 34961b159c27df3b475cfe4415d94a6d1fcd064d
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 10:07:21 2013 -0400

    Add concerns about effects of Mars&#39; moons on Mandy

commit f22b25e3233b4645dabd0d81e651fe074bd8e73b
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 09:51:46 2013 -0400

    Start notes on Mars as a base</code></pre>
<p>Para recapitular, cada vez que queremos añadir cambios a nuestro repositorio, tenemos primero que añadir los archivos modificados al “staging area” (<code>git add</code>) y subsecuentemente aprobar los cambios para que sean agregados al repositorio (<code>git commit</code>):</p>
<div class="figure">
<img src="fig/git-committing.svg" alt="El Flujo de trabajo de Git Commit" />
<p class="caption">El Flujo de trabajo de Git Commit</p>
</div>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="eligiendo-un-mensaje-para-el-commit"><span class="glyphicon glyphicon-pencil"></span>Eligiendo un mensaje para el commit</h2>
</div>
<div class="panel-body">
<p>Cual de los siguiente mensajes sería más apropiado para el último commit realizado en el archivo <code>mars.txt</code>?</p>
<ol style="list-style-type: decimal">
<li>“Cambios”</li>
<li>“Línea añadida ‘But Billy will appreciate the lack of humidity’ a mars.txt”</li>
<li>“Discusión acerca de los efectos del clima marciano en Billy”</li>
</ol>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="enviando-commits-a-git"><span class="glyphicon glyphicon-pencil"></span>Enviando commits a Git</h2>
</div>
<div class="panel-body">
<p>¿Cuál o cuáles de los siguientes comandos guardarían los cambios hechos a <code>myfile.txt</code> a mi repositorio de Git local?</p>
<ol style="list-style-type: decimal">
<li><pre><code>$ git commit -m &quot;my recent changes&quot;</code></pre></li>
<li><pre><code>$ git init myfile.txt
$ git commit -m &quot;my recent changes&quot;</code></pre></li>
<li><pre><code>$ git add myfile.txt
$ git commit -m &quot;my recent changes&quot;</code></pre></li>
<li><pre><code>$ git commit -m myfile.txt &quot;my recent changes&quot;</code></pre></li>
</ol>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="bio-repositorio"><span class="glyphicon glyphicon-pencil"></span><code>bio</code> Repositorio</h2>
</div>
<div class="panel-body">
<p>Crea un nuevo repositorio de Git en tu computadora llamado <code>bio</code>. Escribe un biografía de tres líneas en un archivo llamado <code>me.txt</code>, agrega y aprueba tus cambios, modifica una línea, agrega una cuarta línea fourth line, y muestra las diferencias entre su estado actualizado y su estado original.</p>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="autor-y-committer"><span class="glyphicon glyphicon-pencil"></span>Autor y Committer</h2>
</div>
<div class="panel-body">
<p>Por cada uno de los commits que haz realizado, Git ha almacenado tu nombre dos veces. Se almacena tu nombre como el autor así como la persona realizando los commits o “commiter”. Puedes revisar esto pidiéndole a Git que te muestre más información acerca de tus commits más recientes:</p>
<pre><code>$ git log --format=full</code></pre>
<p>Al realizar un commit puedes nombrar a alguien más como autor:</p>
<pre><code>$ git commit --author=&quot;Stanley Kubrick &lt;s.kubrick@sciland.com&gt;&quot;</code></pre>
<p>Crea un nuevo repositorio y crea dos commits: uno sin la opción <code>--author</code> y otra nombrando a un compañero tuyo como autor. Ejecuta <code>git log</code> y <code>git log --format=full</code>. Piensa en qué manera esto puede ayudarte a colaborar con tus compañeros.</p>
</div>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <h5 class="title">Curso basado en material generado por:</h5>
        <a href="http://software-carpentry.org" title="Software Carpentry">
        <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" style="width: 120px" />
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/git-novice">Fuente Original</a>
        <a class="label swc-blue-bg" href="mailto:selene.fernandez.valverde@gmail.com">Contacto</a>
        <a class="label swc-blue-bg" href="LICENSE.html">Licencia</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
