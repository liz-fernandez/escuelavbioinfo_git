<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Control de versiones usando Git</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://www.puntoyaprende.com/pbi/" title="Posgrado en Biologia Integrativa">
          <img alt="Logo Posgrado Biologia Integrativa" src="img/posgrado_bi_logo.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">Control de versiones usando Git</h1></a>
          <h2 class="subtitle">Explorando el historial</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="objetivos-de-aprendizaje"><span class="glyphicon glyphicon-certificate"></span>Objetivos de aprendizaje</h2>
</div>
<div class="panel-body">
<ul>
<li>Identificar y utilizar los códigos identificadores de commit generados por Git.</li>
<li>Comparar distintas versiones de archivos rastreados.</li>
<li>Restaurar versiones previas de archivos.</li>
</ul>
</div>
</section>
<p>Si queremos ver que cambios se han realizado entre distintas versiones podemos utilizar nuevamente el comando <code>git diff</code>, pero con la notación <code>HEAD~1</code>, <code>HEAD~2</code>, etc, para referirnos a commits previos:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> diff HEAD~1 mars.txt</code></pre></div>
<pre class="output"><code>diff --git a/mars.txt b/mars.txt
index 315bf3a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1,2 +1,3 @@
 Cold and dry, but everything is my favorite color
 The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity</code></pre>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> diff HEAD~2 mars.txt</code></pre></div>
<pre class="output"><code>diff --git a/mars.txt b/mars.txt
index df0654a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,3 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity</code></pre>
<p>De este modo podemos construir una cadena de commits. Al eslabón más reciente de la cadena se le conoce como <code>HEAD</code>. Podemos nombrar commits previos utilizando la notación <code>~</code>, entonces <code>HEAD~1</code> (“head minus one”) significa “el commit previo” mientras que <code>HEAD~123</code> regresa 123 commits antes del commit actual.</p>
<p>También podemos llamar estos commits utilizando las largas series de dígitos y letras que despliega el comando <code>git log</code>. Estos son identificadores únicos para cada uno de los cambios, y en este caso son realmente únicos: cada cambio en cualquier archivo en el repositorio en cualquier computadora tiene un identificador único de 40 caracteres. Por ejemplo, a nuestro primer commit se le asigno el identificador f22b25e3233b4645dabd0d81e651fe074bd8e73b. Intentemos lo siguiente:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> diff f22b25e3233b4645dabd0d81e651fe074bd8e73b mars.txt</code></pre></div>
<pre class="output"><code>diff --git a/mars.txt b/mars.txt
index df0654a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,3 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity</code></pre>
<p>Esa es la respuesta correcta,That’s the right answer, Pero teclear cadenas de 40 caracteres aleatorios es ineficiente, por lo tanto Git nos permite utilizar solo los primeros caracteres:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> diff f22b25e mars.txt</code></pre></div>
<pre class="output"><code>diff --git a/mars.txt b/mars.txt
index df0654a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,3 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity</code></pre>
<p>¡Muy bien! Podemos guardar los cambios a los archivos y ver que ha cambiado. Ahora, ¿cómo podemos restaurar versiones previas de archivos? Supongamos que sobre escribimos accidentalmente nuestro archivo:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">nano</span> mars.txt
$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>We will need to manufacture our own oxygen</code></pre>
<p><code>git status</code> nos dice que el archivo ha cambiado, pero estos cambios no han sido agregados al área de stagin:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
# Changes not staged for commit:
#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)
#
#   modified:   mars.txt
#
no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</code></pre>
<p>Podemos regresar las cosas a su estado previo utilizando el comando <code>git checkout</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> checkout HEAD mars.txt
$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity</code></pre>
<p>Como su nombre sugiere, <code>git checkout</code> checa (restaura) una version previa de un archivo. En este caso, le estamos diciendo a Git que queremos recuperar la versión del archivo guardado en <code>HEAD</code>, que es la última versión o commit guardado. Si queremos regresar a versiones anteriores, podemos usar el identificador del commit en lugar de <code>HEAD</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> checkout f22b25e mars.txt</code></pre></div>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="no-pierdas-la-cabeza-head"><span class="glyphicon glyphicon-pushpin"></span>No pierdas la cabeza (HEAD)</h2>
</div>
<div class="panel-body">
<p>En la parte superior utilizamos</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> checkout f22b25e mars.txt</code></pre></div>
<p>para revertir mars.txt a su estado después del commit f22b25e. Si olvidas especificar <code>mars.txt</code> en ese comando, git te mostrará el mensaje “You are in ‘detached HEAD’ state.” En este estado no debes realizar ningún cambio. Puedes reparar esto re-uniendo el <code>HEAD</code> usando el comando <code>git checkout master</code></p>
</div>
</aside>
<p>Es importante recordar que debemos usar el número de commit que identifica el estado del repositorio <em>antes</em> del cambio que estamos tratando de revertir. Un error común es utilizar el número del commit en el cual hicimos el cambio que estamos tratando de deshacer. En el ejemplo siguiente, tratamos de revertir el repositorio a su estado antes del último commit, que es el commit <code>f22b25e</code>:</p>
<div class="figure">
<img src="fig/git-checkout.svg" alt="Git Checkout" />
<p class="caption">Git Checkout</p>
</div>
<p>En resumen:</p>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="caricatura-acerca-de-como-funciona-git"><span class="glyphicon glyphicon-pushpin"></span>Caricatura acerca de como funciona Git</h2>
</div>
<div class="panel-body">
<div class="figure">
<img src="fig/git_staging.svg" alt="http://figshare.com/articles/How_Git_works_a_cartoon/1328266" />
<p class="caption">http://figshare.com/articles/How_Git_works_a_cartoon/1328266</p>
</div>
</div>
</aside>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="simplificando-el-caso-común"><span class="glyphicon glyphicon-pushpin"></span>Simplificando el caso común</h2>
</div>
<div class="panel-body">
<p>Si lees cuidadosamente el resultado del comando <code>git status</code>, verás que incluye la siguiente pista:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">(use</span> <span class="st">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="kw">)</span></code></pre></div>
<p>Como dice, As it says, <code>git checkout</code> sin un identificador de una versión restaura archivos al estado guardado en el <code>HEAD</code>. El guión doble <code>--</code> se necesita para separar los nombres de los archivos que estan siendo restaurados del comando mismo: sin estos, Git tratará de utilizar el nombre del archivo como el número identificador del commit.</p>
</div>
</aside>
<p>El hecho de que los archivos pueden ser restaurados uno por uno tiende a cambiar la manera en la que la gente organiza su trabajo. Si todo está en un solo documento es difícil (aunque no imposible) revertir cambios a una parte del documento (por ejemplo la introducción) sin deshacer cambios en otras parte (ej: la discusión). Por el contrario, si la introducción y la conclusión se almacenan en archivos independientes cambiar a distintas versiones de las distintas partes de forma independiente se vuelve mucho más sencillo.</p>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="recuperando-versiones-previas-de-un-archivo"><span class="glyphicon glyphicon-pencil"></span>Recuperando Versiones previas de un Archivo</h2>
</div>
<div class="panel-body">
<p>Jennifer ha hecho cambios a un script de Python en el cual ha estado trabajado por semanas, y las modificaciones que realizó esta mañana lo “rompieron” por lo que el script ya no funciona. Se ha pasado más de una hora tratando de arreglarlo sin lograrlo …</p>
<p>Por suerte, ¡Jennifer ha utilizado control de versiones de su proyecto usando Git! ¿Cuáles de los comandos de abajo le permitirán recuperar la última versión confirmada (commited) de su script de Python llamado <code>data_cruncher.py</code>?</p>
<ol style="list-style-type: decimal">
<li><pre><code>$ git checkout HEAD</code></pre></li>
<li><pre><code>$ git checkout HEAD data_cruncher.py</code></pre></li>
<li><pre><code>$ git checkout HEAD~1 data_cruncher.py</code></pre></li>
<li><pre><code>$ git checkout &lt;unique ID of last commit&gt; data_cruncher.py</code></pre></li>
<li>Both 2 &amp; 4</li>
</ol>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="entendiendo-el-historial-y-el-flujo-de-datos-workflow"><span class="glyphicon glyphicon-pencil"></span>Entendiendo el historial y el flujo de datos (workflow)</h2>
</div>
<div class="panel-body">
<p>¿Cuál es el resultado del comando <code>cat venus.txt</code> al final de esta serie de comandos?</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cd</span> planets
$ <span class="kw">nano</span> venus.txt <span class="co">#input the following text: Venus is beautiful and full of love</span>
$ <span class="kw">git</span> add venus.txt
$ <span class="kw">nano</span> venus.txt <span class="co">#add the following text: Venus is too hot to be suitable as a base</span>
$ <span class="kw">git</span> commit -m <span class="st">&quot;comments on Venus as an unsuitable base&quot;</span>
$ <span class="kw">git</span> checkout HEAD venus.txt
$ <span class="kw">cat</span> venus.txt <span class="co">#this will print the contents of venus.txt to the screen</span></code></pre></div>
<ol style="list-style-type: decimal">
<li><pre class="output"><code>Venus is too hot to be suitable as a base</code></pre></li>
<li><pre class="output"><code>Venus is beautiful and full of love</code></pre></li>
<li><pre class="output"><code>Venus is beautiful and full of love
Venus is too hot to be suitable as a base</code></pre></li>
<li><pre class="output"><code>Error dado que cambiaste venus.txt sin confirmar los cambios</code></pre></li>
</ol>
</div>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <h5 class="title">Curso basado en material generado por:</h5>
        <a href="http://software-carpentry.org" title="Software Carpentry">
        <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" style="width: 120px" />
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/git-novice">Fuente Original</a>
        <a class="label swc-blue-bg" href="mailto:selene.fernandez.valverde@gmail.com">Contacto</a>
        <a class="label swc-blue-bg" href="LICENSE.html">Licencia</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
