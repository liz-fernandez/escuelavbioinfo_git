<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Control de versiones usando Git</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://www.puntoyaprende.com/pbi/" title="Posgrado en Biologia Integrativa">
          <img alt="Logo Posgrado Biologia Integrativa" src="img/posgrado_bi_logo.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">Control de versiones usando Git</h1></a>
          <h2 class="subtitle">Conflictos</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="objetivos-de-aprendizaje"><span class="glyphicon glyphicon-certificate"></span>Objetivos de aprendizaje</h2>
</div>
<div class="panel-body">
<ul>
<li>Explicar que son los conflictos y cuando pueden ocurrir.</li>
<li>Resolver conflictos resultantes de una fusión (merge).</li>
</ul>
</div>
</section>
<p>Tan pronto como varias personas comienzan a trabajar en el mismo proyecto en paralelo, es probable que ocurran errores. Esto puede ocurrir aún con una sola persona: si estás trabajando en una pieza de código en tu laptop y en el server del lab, puedes hacer cambios diferentes en cada copia. El control de versiones nos permite administrar estos <a href="reference.html#conflicts">conflictos</a> por medio de sus herramientas para <a href="reference.html#resolve">resolver</a> cambios que superponen o son conflictivos.</p>
<p>Para entender mejor como resolver conflictos, debemos crear uno. El archivo <code>mars.txt</code> actualmente tiene la siguiente información en cada una de las copias de el repositorio <code>planets</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity</code></pre>
<p>Añadamos una línea a una de las copias de los compañeros de cada par:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">nano</span> mars.txt
$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
This line added to Wolfman&#39;s copy</code></pre>
<p>y subamos este cambio a GitHub:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> add mars.txt
$ <span class="kw">git</span> commit -m <span class="st">&quot;Adding a line in our home copy&quot;</span></code></pre></div>
<pre class="output"><code>[master 5ae9631] Adding a line in our home copy
 1 file changed, 1 insertion(+)</code></pre>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> push origin master</code></pre></div>
<pre class="output"><code>Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 352 bytes, done.
Total 3 (delta 1), reused 0 (delta 0)
To https://github.com/vlad/planets
   29aba7c..dabb4c8  master -&gt; master</code></pre>
<p>Ahora, dejemos que el otro compañero realice un cambio diferente en su copia <em>sin</em> actualizar desde GitHub:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">nano</span> mars.txt
$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
We added a different line in the other copy</code></pre>
<p>Podemos confirmar el cambio de manera local:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> add mars.txt
$ <span class="kw">git</span> commit -m <span class="st">&quot;Adding a line in my copy&quot;</span></code></pre></div>
<pre class="output"><code>[master 07ebc69] Adding a line in my copy
 1 file changed, 1 insertion(+)</code></pre>
<p>pero Git no nos permitirá subir los cambios a GitHub:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> push origin master</code></pre></div>
<pre class="output"><code>To https://github.com/vlad/planets.git
 ! [rejected]        master -&gt; master (non-fast-forward)
error: failed to push some refs to &#39;https://github.com/vlad/planets.git&#39;
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. &#39;git pull&#39;)
hint: before pushing again.
hint: See the &#39;Note about fast-forwards&#39; in &#39;git push --help&#39; for details.</code></pre>
<div class="figure">
<img src="fig/conflict.svg" alt="Conflictos en los cambios" />
<p class="caption">Conflictos en los cambios</p>
</div>
<p>Git detecta que los cambios hechos a una copia se superponen a aquellos hechos en la otra y nos impide reescribir nuestro trabajo previo. Lo que tenemos que hacer es bajar (pull) los cambios de GitHub, y fusionarlos (<a href="reference.html#merge">merge</a>) dentro de la copia en la que estamos trabajando actualmente y subir (push) es última versión. Empecemos bajando los cambios:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> pull origin master</code></pre></div>
<pre class="output"><code>remote: Counting objects: 5, done.        
remote: Compressing objects: 100% (2/2), done.        
remote: Total 3 (delta 1), reused 3 (delta 1)        
Unpacking objects: 100% (3/3), done.
From https://github.com/vlad/planets
 * branch            master     -&gt; FETCH_HEAD
Auto-merging mars.txt
CONFLICT (content): Merge conflict in mars.txt
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
<p><code>git pull</code> nos indica que hay un conflicto, e indica el conflicto en el archivo afectado:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
We added a different line in the other copy
=======
This line added to Wolfman&#39;s copy
&gt;&gt;&gt;&gt;&gt;&gt;&gt; dabb4c8c450e8475aee9b14b4383acc99f42af1d</code></pre>
<p>Nuestro cambio—aquel en <code>HEAD</code>—es precedido por <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>. Git ha insertado <code>=======</code> como un separador entre cambios conflictivos y marcado el fin del contenido descargado de Github con el símbolo <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>. (La cadena de letras y dígitos después de ese marcador identifica el commit que acabamos de descargar).</p>
<p>Ahora depende de nosotros editar este archivo y remover estos marcadores para reconciliar los cambios. Podemos hacer lo que queramos: guardar los cambios hechos en el repositorio local, guardar los cambios hechos en el repositorio remoto, escribir algo nuevo para reemplazar a ambos o deshacernos del cambio completamente. Reemplacemos ambos de modo que el archivo quede así:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cat</span> mars.txt</code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
We removed the conflict on this line</code></pre>
<p>Para finalizar la fusión, añadimos <code>mars.txt</code> con los cambios hechos en la fusión (merge) y los aprobamos (commit):</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> add mars.txt
$ <span class="kw">git</span> status</code></pre></div>
<pre class="output"><code># On branch master
# All conflicts fixed but you are still merging.
#   (use &quot;git commit&quot; to conclude merge)
#
# Changes to be committed:
#
#   modified:   mars.txt
#</code></pre>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> commit -m <span class="st">&quot;Merging changes from GitHub&quot;</span></code></pre></div>
<pre class="output"><code>[master 2abf2b1] Merging changes from GitHub</code></pre>
<p>Ahora podemos subir nuestros cambios a GitHub:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> push origin master</code></pre></div>
<pre class="output"><code>Counting objects: 10, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 697 bytes, done.
Total 6 (delta 2), reused 0 (delta 0)
To https://github.com/vlad/planets.git
   dabb4c8..2abf2b1  master -&gt; master</code></pre>
<p>Git mantiene un record de que se unió con que, de modo que no tengamos que reparar cosas manualmente cuando el colaborador que hizo el primer cambio baje los cambios (pull):</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> pull origin master</code></pre></div>
<pre class="output"><code>remote: Counting objects: 10, done.        
remote: Compressing objects: 100% (4/4), done.        
remote: Total 6 (delta 2), reused 6 (delta 2)        
Unpacking objects: 100% (6/6), done.
From https://github.com/vlad/planets
 * branch            master     -&gt; FETCH_HEAD
Updating dabb4c8..2abf2b1
Fast-forward
 mars.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
<p>Obtenemos el siguiente archivo fusionado:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cat</span> mars.txt </code></pre></div>
<pre class="output"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
We removed the conflict on this line</code></pre>
<p>No tenemos que fusionar nuevamente ya que Git sabe que alguien ya lo ha hecho.</p>
<p>La capacidad del control de versiones de fusionar cambios conflictivos es otra de las razones por la que los usuarios tienden a dividir sus programas y artículos en archivos multiples en lugar de almacenar todo en un solo archivo grande. Hay otro beneficio: cada vez que hay conflictos repetidos en un archivo en particular, el sistema de control de versiones dice a sus usuarios que deben aclarar quién es responsable de que, o encontrar una manera diferente de dividir el trabajo.</p>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="resolviendo-conflictos-creados-por-tí"><span class="glyphicon glyphicon-pencil"></span>Resolviendo conflictos creados por tí</h2>
</div>
<div class="panel-body">
<p>Clona el repositorio creado por tu instructor, Añádele un nuevo archivo, y modifica un archivo existente (tu instructor te dirá cual). Cuando te lo pida el instructor, baja los cambios del repositorio para crear un conflicto y resuélvelo.</p>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="conflictos-en-archivos-no-textuales"><span class="glyphicon glyphicon-pencil"></span>Conflictos en archivos no textuales</h2>
</div>
<div class="panel-body">
<p>¿Qué hace Git cuando hay un conflicto en una imagen o en otro archivo no textual almacenado usando control de versiones?</p>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="una-sesión-de-trabajo-común"><span class="glyphicon glyphicon-pencil"></span>Una sesión de trabajo común</h2>
</div>
<div class="panel-body">
<p>Te sientas en tu computadora a trabajar en un proyecto compartido rastreado en un repositorio remote de Git. Durante tu sesión de trabajo, haces lo siguiente, aunque no en ese orden:</p>
<ul>
<li><em>Realizar cambios</em> añadiendo el número <code>100</code> al archivo <code>numbers.txt</code></li>
<li><em>Actualizar el repositorio remoto</em> para que sea igual que el repositorio local</li>
<li><em>Celebrar</em> tu éxito con una cerveza</li>
<li><em>Actualizar el repositorio local</em> para que sea igual al repositorio remoto</li>
<li><em>Añadir los cambios</em> al área de staging para que sean aprobados</li>
<li><em>Aprobar los cambios</em> al repositorio local</li>
</ul>
<p>¿En que orden se deben realizar estas acciones para minimizar las probabilidades de generar conflictos? Coloca los comandos en el orden correcto en la columna <em>acción</em> de la tabla de abajo. Cuando tengas el orden correcto, escribe los comandos correspondientes en la columna <em>comandos</em>. Hemos escrito algunos pasos para ayudarte a empezar.</p>
<table>
<thead>
<tr class="header">
<th align="left">orden</th>
<th align="left">acción . . . . . . . . . .</th>
<th align="left">comando . . . . . . . . . .</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left"></td>
<td align="left"><code>echo 100 &gt;&gt; numbers.txt</code></td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">Celebrate!</td>
<td align="left"><code>AFK</code></td>
</tr>
</tbody>
</table>
</div>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <h5 class="title">Curso basado en material generado por:</h5>
        <a href="http://software-carpentry.org" title="Software Carpentry">
        <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" style="width: 120px" />
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/git-novice">Fuente Original</a>
        <a class="label swc-blue-bg" href="mailto:selene.fernandez.valverde@gmail.com">Contacto</a>
        <a class="label swc-blue-bg" href="LICENSE.html">Licencia</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
